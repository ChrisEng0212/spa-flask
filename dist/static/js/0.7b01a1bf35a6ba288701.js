webpackJsonp([0],{djO7:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("mvHQ"),a=s.n(i),n=s("0xDb"),o={name:"Toolbar",props:{toolbarShow:Boolean,showAnswers:Boolean,testType:String},data:function(){return{showToolbar:!0,wordsReset:"6",words:6,choices:4,retry:!1,testItemsRoot:[],amendedList:[],selected:null,toolbarSettings:{},optionsA:[{value:null,text:"---"}],optionsG:[{value:null,text:"---"},{value:"v.",text:"verbs"},{value:"adj.",text:"adjectives"},{value:"n.",text:"nouns"},{value:"phr.",text:"phrases"},{value:"abbr.",text:"abbreviations"},{value:"prop.",text:"proper nouns"}],optionsR:[{value:null,text:"---"},{value:0,text:"neutral score"},{value:1,text:"easier words"},{value:-1,text:"harder words"}],label:"lbAn",labelOptions:[{text:"answer",value:"lbAn"},{text:"question",value:"lbQu"},{text:"all off",value:"lbOff"},{text:"all on",value:"lbOn"}],sort:"srtNone",sortOptions:[{text:"none",value:"srtNone"},{text:"difficulty",value:"srtDiff"},{text:"grammar",value:"srtGram"},{text:"letter",value:"srtLet"}],sound:"sdEx",soundOptions:[{text:"exam mode",value:"sdEx"},{text:"auto play",value:"sdOn"},{text:"None",value:"sdOff"}],spelling:null,spellingText:"-----",optionsO:[{value:null,text:"---"},{value:"const",text:"show vowels"},{value:"vowels",text:"show consonants"},{value:"blanks",text:"show blanks"},{value:"all",text:"show all"},{value:"showFL",text:"show words"},{value:"typos",text:"typos"},{value:"scramble",text:"scramble letter"}],specialText:"-----",special:null,optionsS:[{value:null,text:"---"},{value:"punc",text:"punctuation"},{value:"phr.",text:"phrases"},{value:"abbr.",text:"abbreviations"},{value:"prop.",text:"proper nouns"}],display:"ch_text_On",displayOptions:[{text:"Chinese",value:"ch_text_On"},{text:"Label",value:"ch_lb_On"},{text:"None",value:"ch_lb_Off"}],feedback:"fbConst",feedbackOptions:[{text:"Constant",value:"fbConst"},{text:"Complete",value:"fbComp"},{text:"None",value:"fbNone"}]}},methods:{makeTest:function(){this.testItemsRoot=[];var t=JSON.parse(this.stringItems);if(this.amendedList=[],"srtNone"===this.sort&&null===this.special)this.amendedList=t;else if("srtDiff"===this.sort)for(var e in t)0===this.selected&&0===t[e].transScore&&this.amendedList.push(t[e]),0===this.selected&&null===t[e].transScore&&this.amendedList.push(t[e]),-1===this.selected&&t[e].transScore<=-1&&this.amendedList.push(t[e]),1===this.selected&&t[e].transScore>=1&&this.amendedList.push(t[e]);else if("srtLet"===this.sort)for(var s in t)t[s].Category===this.selected&&this.amendedList.push(t[s]);else if("srtGram"===this.sort)for(var i in t)t[i].Gr===this.selected&&this.amendedList.push(t[i]);else if("phr."===this.special||"abbr."===this.special||"prop."===this.special)for(var a in t)t[a].Gr===this.special&&this.amendedList.push(t[a]);else if("punc"===this.special)for(var n in t)(t[n].English.includes("-")||t[n].English.includes("'")||t[n].English.includes("&")||t[n].English.includes("."))&&this.amendedList.push(t[n]);this.amendedList.length<this.words&&(this.words=this.amendedList.length),"TypeTest"===this.testType?this.makeSpelling():this.makeChoices()},makeChoices:function(){for(var t=0;t<this.words;){var e=this.amendedList[Math.floor(Math.random()*this.amendedList.length)];if(this.checkDuplicate(e)){for(var s=[{English:e.English,Chinese:e.Chinese,Gr:e.Gr,sdEn:e.mp3en,sdCh:e.mp3ch}],i=1;i<this.choices;)if("sdTy"===this.sound)s.push({English:this.typoFix(e.English),Gr:e.Gr,sdEn:e.mp3en,sdCh:e.mp3ch,Chinese:e.Chinese}),i++;else{var n=this.amendedList[Math.floor(Math.random()*this.amendedList.length)];s.includes(n)||(s.push({English:n.English,Chinese:n.Chinese,Gr:n.Gr,sdEn:n.mp3en,sdCh:n.mp3ch}),i++)}var o=this.shuffle(s);this.testItemsRoot.push({English:e.English,Chinese:e.Chinese,Choices:o,Gr:e.Gr,sdEn:e.mp3en,sdCh:e.mp3ch}),t++}else console.log("pass",e)}this.toolbarSettings={type:this.testType,sound:this.sound,label:this.label,sort:this.sort,words:this.words,choices:this.choices,selected:this.selected},this.$emit("newTest",{test:this.testItemsRoot,settings:a()(this.toolbarSettings)}),this.words<6&&(this.words=parseInt(this.wordsReset))},makeSpelling:function(){for(var t=0;t<this.words;){var e=this.amendedList[Math.floor(Math.random()*this.amendedList.length)];if(this.checkDuplicate(e)){var s="              ";this.spelling&&(s=Object(n.d)(e.English,this.spelling)),console.log("SPELL",s),this.testItemsRoot.push({English:e.English,Chinese:e.Chinese,Spelling:s,Gr:e.Gr,sdEn:e.mp3en,sdCh:e.mp3ch}),t++}else console.log("pass",e)}this.toolbarSettings={type:this.testType,sound:this.sound,label:this.label,words:this.words,choices:this.choices,spelling:this.spelling,display:this.display,feedback:this.feedback},this.$emit("newTest",{test:this.testItemsRoot,settings:a()(this.toolbarSettings)}),this.words<6&&(this.words=parseInt(this.wordsReset))},typoFix:function(t){var e=t.split(" "),s="";for(var i in e)s+=Object(n.a)(e[i]),s+=" ";return s},retryTest:function(){this.$emit("retry",null)},alphabet:function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var e in t)this.optionsA.push({value:t[e],text:t[e]})},checkDuplicate:function(t){for(var e in this.testItems)if(this.testItems[e].English===t.English)return console.log("found",t),!1;return!0},shuffle:function(t){for(var e=t.length-1;e>0;e--){var s=Math.floor(Math.random()*(e+1)),i=[t[s],t[e]];t[e]=i[0],t[s]=i[1]}return t},goTo:function(t){this.$router.push(t)}},watch:{words:function(){0===this.words&&(alert("There are no words that meet your selection"),this.words=parseInt(this.wordsReset))}},created:function(){this.alphabet(),this.tableItems=this.$store.getters.makeList,this.stringItems=a()(this.tableItems),"TransCh"===this.testType&&(this.sortOptions.pop(),this.soundOptions=[{text:"exam mode",value:"sdEx"},{text:"typo check",value:"sdTy"},{text:"off",value:"sdOff"}]),"TypeTest"===this.testType&&(this.sound="sdEn",this.soundOptions=[{text:"English",value:"sdEn"},{text:"Chinese",value:"sdCh"},{text:"None",value:"sdOff"}])}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.toolbarShow?t._e():s("div",{staticClass:"toolbar"},[s("div",[s("div",{staticClass:"mt-2 bg-secondary p-2"},[s("h2",{staticClass:"text-sand",attrs:{align:"center"}},[t._v("\n            "+t._s(t.testType)+"\n          ")])]),t._v(" "),s("div",{staticClass:"bg-primary p-2 mt-0"},[s("b-row",[s("b-col",[s("b-button",{staticClass:"md-3",attrs:{variant:"primary",block:""},on:{click:function(e){t.makeTest(),t.showToolbar=!1}}},[t._v("Start")])],1),t._v(" "),t.showAnswers?s("b-col",[s("b-button",{staticClass:"md-3",attrs:{variant:"warning",block:""},on:{click:function(e){return t.retryTest()}}},[t._v("Retry")])],1):t._e(),t._v(" "),s("b-col",[s("b-button",{staticClass:"md-3",attrs:{variant:"info",block:""},on:{click:function(e){t.showToolbar=!0}}},[t._v("Settings")])],1)],1)],1),t._v(" "),t.showToolbar?s("div",{staticClass:"bg-grey p-2 pb-4"},[s("b-row",{attrs:{cols:"2","cols-md":"4","cols-lg":"6"}},[s("b-col",{staticClass:"mt-3"},[s("h6",{attrs:{align:"center"}},[t._v("Words")]),t._v(" "),s("div",{attrs:{align:"center"}},[s("b-form-spinbutton",{staticStyle:{height:"125px"},attrs:{min:"6",max:"30",step:"2",vertical:""},model:{value:t.words,callback:function(e){t.words=e},expression:"words"}})],1)]),t._v(" "),"TransEng"===t.testType||"TransCh"===t.testType?s("b-col",{staticClass:"mt-3"},[s("h6",{attrs:{align:"center"}},[t._v("Choices")]),t._v(" "),s("div",{attrs:{align:"center"}},[s("b-form-spinbutton",{staticStyle:{height:"125px"},attrs:{min:"2",max:"6",vertical:""},model:{value:t.choices,callback:function(e){t.choices=e},expression:"choices"}})],1)]):t._e(),t._v(" "),s("b-col",{staticClass:"mt-3"},[s("h6",{attrs:{align:"center"}},[t._v("Sound")]),t._v(" "),s("div",{attrs:{align:"center"}},[s("b-form-radio-group",{staticClass:"radioBTN",attrs:{options:t.soundOptions,"button-variant":"outline-danger",buttons:"",stacked:""},model:{value:t.sound,callback:function(e){t.sound=e},expression:"sound"}})],1)]),t._v(" "),"TypeTest"===t.testType?s("b-col",{staticClass:"mt-3"},[s("h6",{attrs:{align:"center"}},[t._v("Display")]),t._v(" "),s("div",{attrs:{align:"center"}},[s("b-form-radio-group",{attrs:{options:t.displayOptions,buttons:"","button-variant":"outline-primary",stacked:""},model:{value:t.display,callback:function(e){t.display=e},expression:"display"}})],1)]):t._e(),t._v(" "),"TypeTest"===t.testType?s("b-col",{staticClass:"mt-3"},[s("h6",{attrs:{align:"center"}},[t._v("Feedback")]),t._v(" "),s("div",{attrs:{align:"center"}},[s("b-form-radio-group",{attrs:{options:t.feedbackOptions,buttons:"","button-variant":"outline-primary",stacked:""},model:{value:t.feedback,callback:function(e){t.feedback=e},expression:"feedback"}})],1)]):t._e(),t._v(" "),"TransEng"===t.testType||"TransCh"===t.testType?s("b-col",{staticClass:"mt-3"},[s("h6",{attrs:{align:"center"}},[t._v("Grammar")]),t._v(" "),s("div",{attrs:{align:"center"}},[s("b-form-radio-group",{attrs:{options:t.labelOptions,buttons:"","button-variant":"outline-primary",stacked:""},model:{value:t.label,callback:function(e){t.label=e},expression:"label"}})],1)]):t._e(),t._v(" "),"TransEng"===t.testType||"TransCh"===t.testType?s("b-col",{staticClass:"mt-3"},[s("h6",{attrs:{align:"center"}},[t._v(" Sort ")]),t._v(" "),s("div",{attrs:{align:"center"}},[s("b-form-radio-group",{attrs:{options:t.sortOptions,buttons:"","button-variant":"outline-primary",stacked:""},model:{value:t.sort,callback:function(e){t.sort=e},expression:"sort"}})],1)]):t._e(),t._v(" "),"TransEng"===t.testType||"TransCh"===t.testType?s("b-col",{staticClass:"mt-3"},[s("div",{staticClass:"mt-5"}),t._v(" "),"srtLet"==t.sort?s("b-form-select",{staticClass:"selectColor",attrs:{options:t.optionsA},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}):t._e(),t._v(" "),"srtGram"==t.sort?s("b-form-select",{staticClass:"selectColor",attrs:{options:t.optionsG},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}):t._e(),t._v(" "),"srtDiff"==t.sort?s("b-form-select",{staticClass:"selectColor",attrs:{options:t.optionsR},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}):t._e()],1):t._e(),t._v(" "),"TypeTest"===t.testType?s("b-col",{staticClass:"mt-3"},[s("h6",{attrs:{align:"center"}},[t._v(" Spelling ")]),t._v(" "),s("div",{attrs:{align:"center"}},[s("b-dropdown",{attrs:{text:t.spellingText}},[s("div",t._l(t.optionsO,function(e,i){return s("b-dropdown-item",{key:i,on:{click:function(s){t.spelling=e.value,t.spellingText=e.text}}},[t._v(" "+t._s(e.text)+" ")])}),1)])],1)]):t._e(),t._v(" "),"TypeTest"===t.testType?s("b-col",{staticClass:"mt-3"},[s("h6",{attrs:{align:"center"}},[t._v(" Sort ")]),t._v(" "),s("div",{attrs:{align:"center"}},[s("b-dropdown",{attrs:{text:t.specialText,variant:"warning"}},[s("div",t._l(t.optionsS,function(e,i){return s("b-dropdown-item",{key:i,on:{click:function(s){t.special=e.value,t.specialText=e.text}}},[t._v(" "+t._s(e.text)+" ")])}),1)])],1)]):t._e()],1)],1):t._e()])])},staticRenderFns:[]};var r=s("VU/8")(o,l,!1,function(t){s("l5Ws")},"data-v-14281731",null);e.default=r.exports},l5Ws:function(t,e){}});
//# sourceMappingURL=0.7b01a1bf35a6ba288701.js.map