webpackJsonp([5],{HLHQ:function(e,t){},OAQr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={name:"TransEngMatch",components:{ToolbarMatch:s("LR+Q").default},props:{testType:String,p1:Number,p1name:String,p2:Number,p2name:String,player:String},data:function(){return{waiting:0,pageHead:"English --\x3e Chinese",toolbarShow:!0,showToolbar:!0,hover:!1,showAnswers:!1,ready:[],answered:[],showTest:!1,answerData:[],filter:null,testItems:[],settings:{},fields:["English","Chinese"],clock:null,time:0,socket:this.$store.state.socket,progressValues:{p1:0,p2:0,warn:0}}},methods:{recordAnswer:function(e,t,s){var n=e+s,r=s===t;this.socket.emit("answer",{room:this.p1,name:e,chinese:t,btnID:n,player:this.player,state:r})},filterToggle:function(){this.filter+1<this.testItems.length?(console.log(this.filter,this.testItems.length),this.filter+=1):(console.log("filterMax"),this.$store.dispatch("testActive"),this.filter=null,this.showTest=!1,this.checkAnswers()),this.clock=null,this.time=5e3},disable:function(e,t,s,n,r){var i="btn-"+s,a=document.getElementById(t);a.style.color=n?"green":"red",a.classList.add(i),a.disabled=!0;var o=document.getElementsByName(e);if(console.log(o),s===this.player)for(var l=0;l<o.length;l++)o[l].disabled=!0;if(n)for(var h=0;h<o.length;h++)o[h].disabled=!0;if(this.answered+=1,n||this.answered>1){var c=this;setTimeout(function(){c.answered=0,c.filterToggle(),c.enterResult(e,r,s,n)},2e3)}},start:function(e){this.showAnswers=!1,this.filter=0,this.answerData=[],this.showTest=!0,e&&(this.testItems=e.test,this.settings=JSON.parse(e.settings))},enterResult:function(e,t,s,n){console.log(n);var r="warn";n&&(r=s);var i={English:e,Chinese:t,_rowVariant:r};this.progressValues[rowVariant]+=1,console.log(r,this.progressValues),this.answerData.push(i)},checkAnswers:function(){this.showAnswers=!0,this.$store.dispatch("updateRecord",{mode:"matchTransEng"})},playAudio:function(e){document.getElementById("audio").src=e},readyCheck:function(){if(console.log("length",this.ready,this.ready.length),2===this.ready.length){this.waiting=2;var e=this;setTimeout(function(){e.start(),e.$store.dispatch("testActive"),e.waiting=0,e.ready=[]},3e3)}}},watch:{filter:function(){var e=this.testItems[this.filter];e&&"sdOff"!==this.sound&&this.playAudio(e.sdEn)},hover:function(){if(!0===this.hover){console.log("hover_active");var e=this.testItems[this.filter];this.playAudio(e.sdEn)}}},computed:{isAuthenticated:function(){return this.$store.getters.isAuthenticated}},mounted:function(){var e=this;e.socket.on("go",function(t){console.log("roomReady",t,t.testItems.length),e.room=t.room,t.testItems.length>0&&(e.testItems=t.testItems),e.ready.includes(t.player)||(e.ready.push(t.player),console.log(t.player)),e.readyCheck()}),e.socket.on("answer",function(t){e.disable(t.name,t.btnID,t.player,t.state,t.chinese)})}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"TransEng"},[s("audio",{attrs:{id:"audio",autoplay:""}}),e._v(" "),s("ToolbarMatch",{attrs:{toolbarShow:e.showTest,p1:e.p1,p2:e.p2,p1name:e.p1name,p2name:e.p2name,socket:e.socket,player:e.player,waiting:e.waiting,showAnswers:e.showAnswers,testType:e.testType}}),e._v(" "),e.showTest?s("b-card",{staticClass:"mt-2"},[s("b-progress",{staticClass:"mt-2",attrs:{max:e.testItems.length,"show-value":""}},[s("b-progress-bar",{attrs:{value:e.progressValues.p1,variant:"p1"}}),e._v(" "),s("b-progress-bar",{attrs:{value:e.progressValues.warn,variant:"warn-light"}}),e._v(" "),s("b-progress-bar",{attrs:{value:e.progressValues.p2,variant:"p2"}})],1)],1):e._e(),e._v(" "),s("div",[e.showTest?s("b-card",{staticClass:"mt-2"},e._l(e.testItems,function(t,n){return s("div",{key:n},[s("b-row",[s("b-col",[e.testItems.indexOf(t)===e.filter?s("b-card",{class:{active:e.hover},attrs:{align:"center"},on:{mouseover:function(t){e.hover=!0},mouseleave:function(t){e.hover=!1}}},[s("h3",["sdEx"!==e.settings.sound||1==e.hover?s("span",[e._v(" "+e._s(t.English)+" ")]):e._e(),e._v(" "),"sdEx"==e.settings.sound||"sdOn"==e.settings.sound?s("span",[s("b-icon-soundwave")],1):e._e()])]):e._e()],1)],1),e._v(" "),s("b-row",[s("b-col",[e.testItems.indexOf(t)===e.filter?s("b-card",e._l(t.Choices,function(n,r){return s("div",{key:r},[s("b-button",{attrs:{name:t.English,id:t.English+n.Chinese,variant:"safe",block:""},on:{click:function(s){return e.recordAnswer(t.English,t.Chinese,n.Chinese)}}},[e._v("\n                  "+e._s(n.Chinese)+"\n                ")]),e._v(" "),s("br"),e._v(" "),s("br")],1)}),0):e._e()],1)],1)],1)}),0):e._e()],1),e._v(" "),e.showAnswers?s("div",[s("b-card",{staticClass:"mt-2"},[s("b-table",{attrs:{striped:"",hover:"",items:e.answerData,fields:e.fields}})],1)],1):e._e()],1)},staticRenderFns:[]};var i=s("VU/8")(n,r,!1,function(e){s("HLHQ")},"data-v-61ac2fe2",null);t.default=i.exports}});
//# sourceMappingURL=5.c2283077c14312d2b1a8.js.map