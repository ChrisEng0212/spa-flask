webpackJsonp([9],{"Hq/M":function(t,s){},NWj3:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n=e("mvHQ"),o=e.n(n),a=e("OLUw"),i={name:"MatchTest",data:function(){return{pageHead:"Matching",username:null,userID:null,tableItems:null,stringItems:null,matchNumber:6,buttons:[],btnWatch:null,pressedBtn:[],showTest:!1,answerCount:null,answerMax:6,time:6e4,clock:null,socket:null,room:null,basicClass:"basic bg-prime text-warn p-3 m-1"}},methods:{createMatch:function(){this.buttons=[];var t=this.shuffle(this.tableItems).slice(0,this.matchNumber);for(var s in t)this.buttons.push({caption:t[s].English,name:t[s].English,class:this.basicClass},{caption:t[s].Chinese,name:t[s].English,class:this.basicClass});this.showTest=!0,this.answerCount=0,this.setCountdown()},joinRoom:function(){this.socket.emit("join_room",{room:this.room,username:this.username,userID:this.userID})},startRoom:function(){this.socket.emit("start_room",{room:this.room,username:this.username,userID:this.userID})},clearSync:function(){for(var t in this.buttons)this.buttons[t].class=this.basicClass},deleteButtons:function(t){var s=[];for(var e in this.buttons)this.buttons[e].name!==t&&s.push(this.buttons[e]);this.answerMax+=1;var n=this.shuffle(this.tableItems)[0];s.push({caption:n.English,name:n.English,class:this.basicClass},{caption:n.Chinese,name:n.English,class:this.basicClass}),this.buttons=s},resetGame:function(){clearInterval(this.clock),this.clock=null,this.pressedBtn=[],this.buttons=[],this.time=6e4,this.answerCount=null,this.answerMax=6,this.showTest=!1},setCountdown:function(){this.time=6e4;var t=this;this.clock=setInterval(function(){t.time<=0?t.resetGame():t.time-=1e3},1e3)},shuffle:function(t){for(var s=t.length-1;s>0;s--){var e=Math.floor(Math.random()*(s+1)),n=[t[e],t[s]];t[s]=n[0],t[e]=n[1]}return t},buttonChange:function(t){for(var s in this.buttons)this.buttons[s]===t&&(this.buttons[s].class="basic bg-warn text-prime p-3 m-1")}},watch:{pressedBtn:function(){this.pressedBtn.length>1?this.pressedBtn[0].name===this.pressedBtn[1].name?(this.clearSync(),this.deleteButtons(this.pressedBtn[0].name),this.pressedBtn=[],this.answerCount+=1):(this.time-=5e3,this.pressedBtn=[],this.clearSync()):this.buttonChange(this.pressedBtn[0]),this.btnWatch!==o()(this.buttons)&&this.socket.emit("buttons",{buttons:o()(this.buttons),room:this.room})},buttons:function(){this.btnWatch!==o()(this.buttons)&&this.socket.emit("buttons",{buttons:o()(this.buttons),room:this.room})}},created:function(){this.username=this.$store.state.userProfile.username,this.userID=this.$store.state.userProfile.userID,this.tableItems=this.$store.getters.makeList,this.stringItems=o()(this.tableItems),this.socket=Object(a.a)()},beforeDestroy:function(){this.socket.emit("offline",{username:this.username,userID:this.userID,room:this.room}),this.socket.close()},mounted:function(){var t=this;t.socket.on("buttons",function(s){console.log("socketBTNS",s),t.btnWatch=o()(s.buttons),t.buttons=s.buttons}),t.socket.on("roomReady",function(s){console.log("roomReady",s),t.room=s.room}),t.socket.on("playerReady",function(s){console.log("roomReady",s),t.room=s.room})}},r={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[t.showTest?t._e():e("b-container",[e("b-card",{staticClass:"my-2"},[e("h2",[t._v("\n        "+t._s(t.pageHead)+"\n      ")])])],1),t._v(" "),t.showTest?t._e():e("b-container",[e("b-card",{staticClass:"my-2"},[e("b-button",{on:{click:function(s){return t.createMatch()}}},[t._v("MATCH")]),t._v(" "),e("b-button",{on:{click:function(s){return t.startRoom()}}},[t._v(" Start Room ")]),t._v(" "),e("b-button",{attrs:{disabled:""}},[t._v(" Room: "+t._s(t.room)+" ")]),t._v(" "),e("b-form-input",{model:{value:t.room,callback:function(s){t.room=s},expression:"room"}}),t._v(" "),e("b-button",{on:{click:function(s){return t.joinRoom()}}},[t._v("Join Room")])],1)],1),t._v(" "),e("b-container",{staticClass:"d-none d-lg-block"},[t.showTest?e("b-card",{staticClass:"my-2",attrs:{cols:"10"}},[e("b-row",[e("b-col",{attrs:{cols:"1"}},[e("h4",[t._v(t._s(t.answerCount))])]),t._v(" "),e("b-col",{staticClass:"mt-1",attrs:{cols:"11"}},[e("b-progress",{staticStyle:{height:"30px"},attrs:{value:t.answerCount,max:t.answerMax,animated:""}})],1)],1),t._v(" "),e("b-row",[e("b-col",{attrs:{cols:"1"}},[e("h4",[t._v(t._s(t.time/1e3))])]),t._v(" "),e("b-col",{staticClass:"mt-1",attrs:{cols:"11"}},[e("b-progress",{staticStyle:{height:"30px"},attrs:{value:t.time,max:"60000",animated:"",variant:"alert"}})],1)],1)],1):t._e()],1),t._v(" "),e("b-container",[e("b-card",[e("b-row",{staticClass:"text-center"},t._l(t.buttons,function(s,n){return e("div",{key:n,staticClass:"d-inline"},[e("b-col",{class:s.class,attrs:{name:s.name,"align-v":"center"},on:{click:function(e){return t.pressedBtn.push(s)}}},[e("span",{staticClass:"textLine"},[t._v(" "+t._s(s.caption)+" ")])])],1)}),0)],1)],1),t._v(" "),e("b-container",{staticClass:"d-lg-none"},[t.showTest?e("b-card",{staticClass:"my-2",attrs:{cols:"10"}},[e("b-row",[e("b-col",{staticClass:"mt-1",attrs:{cols:"11"}},[e("b-progress",{staticStyle:{height:"10px"},attrs:{value:t.answerCount,max:t.answerMax,animated:""}})],1)],1),t._v(" "),e("b-row",[e("b-col",{staticClass:"mt-1",attrs:{cols:"11"}},[e("b-progress",{staticStyle:{height:"10px"},attrs:{value:t.time,max:"60000",animated:"",variant:"danger"}})],1)],1)],1):t._e()],1)],1)},staticRenderFns:[]};var c=e("VU/8")(i,r,!1,function(t){e("Hq/M")},"data-v-6fa01c3c",null);s.default=c.exports}});
//# sourceMappingURL=9.438b90bcce8e0da20567.js.map