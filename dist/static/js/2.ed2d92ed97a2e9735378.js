webpackJsonp([2],{R4x1:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i={name:"TransCh",components:{Toolbar:e("djO7").default},data:function(){return{pageHead:"Chinese --\x3e English",testType:"transCh",title:"Chinese --\x3e English",toolbarShow:!0,max:100,value:20,hover:!1,hoverAns:!1,showAnswers:!1,showTest:!1,answerData:[],filter:null,testItems:[],settings:{},fields:["Chinese","English","Choice"],activeStyle:{background:"#4a758b",color:"#E8804C"},neutralStyle:{background:"#d8ecf1",color:"#205372"},buttonStyle:{0:this.neutralStyle,1:this.neutralStyle,2:this.neutralStyle,3:this.neutralStyle,4:this.neutralStyle,5:this.neutralStyle},replay:!1,startTime:null,endTime:null,qCount:0,sCount:0}},methods:{recordAnswer:function(t,s,e){this.qCount+=1;var i=void 0,n=void 0;e===t?(i=1,this.sCount+=1,n="safe"):(i=-1,n="warn");var o={English:t,Chinese:s,Choice:e,Score:i,_rowVariant:n};this.answerData.push(o),this.filter+1<this.testItems.length?"sdEx"===this.settings.sound?(this.filter+=1,this.replay=!1,this.playCycle()):this.filter+=1:this.cancel()},start:function(t){for(var s in this.buttonStyle)this.buttonStyle[s]=this.neutralStyle;this.sCount=0,this.qCount=0,this.startTime=new Date,this.showAnswers=!1,this.filter=0,this.answerData=[],this.showTest=!0,this.$store.dispatch("testActive",!0),t&&(this.testItems=t.test,this.settings=JSON.parse(t.settings)),"sdEx"===this.settings.sound&&this.playCycle()},checkAnswers:function(){this.showAnswers=!0,this.replay=!1,this.$store.dispatch("testActive",!1),this.$store.dispatch("updateRecord",{mode:"transCh",answerData:this.answerData,settingsData:this.settings})},cancel:function(){this.filter=null,this.showTest=!1,this.endTime=new Date,this.showModal(),this.checkAnswers()},showModal:function(){this.$refs.complete.show()},hideModal:function(t){"complete"===t?this.$refs.complete.hide():(this.$refs.fail.hide(),this.msg=null,this.waiting=!0)},timeSpan:function(){var t=(this.endTime-this.startTime)/1e3,s=0,e=0;return t>59?(s=Math.floor(t/60),e=Math.floor(t-60*s),s.toString()+" minutes "+e.toString()+" seconds"):Math.floor(t).toString()+" seconds"},playAudio:function(t){var s=document.getElementById("audio");s.src=t,s.play()},playCycle:function(){for(var t in this.buttonStyle)this.buttonStyle[t]=this.neutralStyle;var s=document.getElementById("cycle"),e=0,i=this,n=this.testItems[this.filter].Choices[e].sdEn;s.src=n,s.play(),this.buttonStyle[e]=this.activeStyle,s.onended=function(){i.buttonStyle[e]=i.neutralStyle,e<i.settings.choices-1?(e+=1,i.buttonStyle[e]=i.activeStyle,n=i.testItems[i.filter].Choices[e].sdEn,s.src=n,s.play()):i.replay=!0}}},watch:{filter:function(){var t=this.testItems[this.filter];t&&"sdTy"===this.settings.sound&&this.playAudio(t.sdEn)},hover:function(){if(this.hover){var t=this.testItems[this.filter];this.playAudio(t.sdCh)}},hoverAns:function(){if(null!==this.hoverAns&&this.replay&&"sdEx"===this.settings.sound){var t=this.hoverAns;this.playAudio(t)}}},created:function(){this.$store.getters.isAuthenticated||this.$router.push("login")}},n={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"TransCh"},[e("audio",{attrs:{id:"audio"}}),t._v(" "),e("audio",{attrs:{id:"cycle"}}),t._v(" "),e("Toolbar",{attrs:{toolbarShow:t.showTest,showAnswers:t.showAnswers,testType:t.testType,title:t.title},on:{newTest:function(s){return t.start(s)},retry:function(s){return t.start()}}}),t._v(" "),t.showTest?e("b-row",{attrs:{"no-gutters":""}},[e("b-col",{attrs:{cols:"11"}},[e("b-progress",{staticStyle:{height:"30px"},attrs:{value:t.filter,max:t.testItems.length,variant:"warn-light","show-progress":"",animated:""}})],1),t._v(" "),e("b-col",{attrs:{cols:"1"}},[e("button",{staticClass:"buttonDiv bg-warn",staticStyle:{height:"30px",width:"100%"},on:{click:function(s){return t.cancel()}}},[e("b-icon",{staticClass:"pb-1 pr-1",attrs:{icon:"x-circle",variant:"cream","font-scale":"1.5"}})],1)])],1):t._e(),t._v(" "),t.showTest?e("div",{staticClass:"bg-grey"},t._l(t.testItems,function(s,i){return e("div",{key:i},[t.testItems.indexOf(s)===t.filter?e("div",[e("button",{staticClass:"questionDiv bg-second",class:{active:t.hover},on:{mouseover:function(s){t.hover=!0},mouseleave:function(s){t.hover=!1}}},["lbOn"===t.settings.label||"lbQu"===t.settings.label?e("span",[t._v("   ("+t._s(s.Gr)+") ")]):t._e(),t._v(" "),e("span",[t._v(" "+t._s(s.Chinese)+" ")])]),t._v(" "),e("div",{staticClass:"p-3"},t._l(s.Choices,function(i,n){return e("div",{key:n},[e("button",{staticClass:"answerBtn",style:t.buttonStyle[n],attrs:{block:""},on:{click:function(e){return t.recordAnswer(s.English,s.Chinese,i.English)}}},["sdEx"===t.settings.sound?e("span",[e("b-icon-soundwave",{attrs:{"font-scale":"1.5"}})],1):"lbAn"===t.settings.label||"sdEx"!==t.settings.sound?e("span",[t._v(" ("+t._s(i.Gr)+")    "+t._s(i.English)+" ")]):e("span",[t._v(t._s(i.English))])]),t._v(" "),e("br"),t._v(" "),e("br")])}),0)]):t._e()])}),0):t._e(),t._v(" "),t.replay?e("div",{staticClass:"bg-grey pb-3"},[e("b-row",[e("b-col",{attrs:{align:"center"}},[e("button",{staticClass:"buttonDiv bg-alert px-3",staticStyle:{width:"45%",height:"50px"},on:{click:function(s){t.playCycle(),t.replay=!1}}},[e("b-icon-arrow-clockwise",{attrs:{variant:"cream","font-scale":"1.5"}})],1)])],1)],1):t._e(),t._v(" "),t.showAnswers?e("div",{staticClass:"bg-smoke"},[e("b-table",{attrs:{striped:"",hover:"",items:t.answerData,fields:t.fields}})],1):t._e(),t._v(" "),e("b-modal",{ref:"complete",attrs:{"hide-header-close":"","no-close-on-esc":"","no-close-on-backdrop":"",align:"center","hide-footer":"",title:"Test Complete"}},[e("div",{staticClass:"d-block"},[e("h3",[t._v(" "+t._s(t.sCount)+"/"+t._s(t.qCount)+" ")]),t._v(" "),e("h3",[t._v(" "+t._s(t.timeSpan())+"  ")])]),t._v(" "),e("button",{staticClass:"buttonDiv mt-3 bg-prime text-cream",staticStyle:{width:"60%"},on:{click:function(s){return t.hideModal("complete")}}},[t._v("Close")])])],1)},staticRenderFns:[]};var o=e("VU/8")(i,n,!1,function(t){e("toLK")},"data-v-90ac4ae6",null);s.default=o.exports},toLK:function(t,s){}});
//# sourceMappingURL=2.ed2d92ed97a2e9735378.js.map