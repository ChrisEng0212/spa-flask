webpackJsonp([1,5,11],{EnST:function(e,t){},XdxJ:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={name:"TransMatch",components:{ToolbarMatch:s("LR+Q").default},props:{testType:String,p1:Number,p1name:String,p2:Number,p2name:String,player:String,socket:Object,s3:String},data:function(){return{waiting:0,pageHead:"Translation Match",toolbarShow:!0,showToolbar:!0,showAnswers:!1,showTest:!1,showProgress:!0,timeReset:null,hover:!1,ready:[],answered:0,answerData:[],filter:null,testItems:[],settings:{},fields:["Question","Answer"],time:null,clock:null,progressValues:{p1:0,p2:0,warn:0},p1score:0,p2score:0,btnIDMarker:null}},methods:{nameCut:function(e){var t=e.split(" ")[0];return t.length>7?t[0]:t},setCountdown:function(){this.time=this.timeReset;var e=this;this.clock=setInterval(function(){0===e.time?(clearInterval(e.clock),e.recordDisable()):e.time-=100},100)},start:function(){this.showAnswers=!1,this.filter=0,this.answerData=[],this.showTest=!0},readyCheck:function(){if(console.log("length",this.ready,this.ready.length),2===this.ready.length){this.waiting=2;var e=this;setTimeout(function(){e.start(),e.waiting=0,e.ready=[]},3e3)}},recordAnswer:function(e,t,s){var n=e+s,a=s===t;this.socket.emit("answer",{room:this.p1,name:e,answer:t,btnID:n,player:this.player,state:a})},recordDisable:function(){this.socket.emit("answer",{room:this.p1,name:null,answer:null,btnID:null,player:this.player,state:!1})},disable:function(e,t,s,n,a){var r="bg-"+s+"-light",i=document.getElementById(t);if(i){n?i.classList.add("correct"):i.classList.add("mistake"),i.classList.add(r),i.disabled=!0;var o=document.getElementsByName(e);if(console.log("Stage2",s,this.player,n),s===this.player)for(var l=0;l<o.length;l++)o[l].disabled=!0;else if(n)for(var c=0;c<o.length;c++)o[c].disabled=!0}else{e=this.testItems[this.filter].Question,a=this.testItems[this.filter].Answer,console.log("Stage3",e,a);for(var u=document.getElementsByName(e),h=0;h<u.length;h++)u[h].disabled=!0}n||1===this.answered?(this.answered=1,this.nextQuestion(e,a,s,n)):0===this.answered&&(this.answered=1,this.setCountdown())},nextQuestion:function(e,t,s,n){clearInterval(this.clock),this.answered=2,this.time=null;var a=this;setTimeout(function(){a.answered=0,a.enterResult(e,t,s,n),a.filterToggle()},2e3)},enterResult:function(e,t,s,n){var a="warn";n&&(a=s);var r={Question:e,Answer:t,_rowVariant:a,Score:0};this.progressValues[a]+=1,this.answerData.push(r)},filterToggle:function(){this.filter+1<this.testItems.length?this.filter+=1:(this.filter=null,this.showTest=!1,this.checkAnswers())},checkAnswers:function(){this.p1score+=this.progressValues.p1,this.p2score+=this.progressValues.p2;var e=void 0;e=this.p1score===this.p2score?0:this.p1score>=this.p2score&&"p1"===this.player?1:this.p2score>=this.p1score&&"p2"===this.player?1:-1,this.$store.dispatch("updateMatch",{mode:"matchTrans",winnerStatus:e}),this.progressValues.p1=0,this.progressValues.p2=0,this.progressValues.warn=0,this.showAnswers=!0},playAudio:function(e){var t=document.getElementById("audio");t.src=e,t.play()},leave:function(){this.answered=0,this.filter=null,this.showTest=!1,this.$emit("leaveMatch")}},watch:{filter:function(){var e=this.testItems[this.filter];e&&"sdOff"!==this.sound&&this.playAudio(e.sdQue)},hover:function(){if(!0===this.hover){var e=this.testItems[this.filter];this.playAudio(e.sdQue)}}},computed:{isAuthenticated:function(){return this.$store.getters.isAuthenticated}},beforeDestroy:function(){clearInterval(this.clock),this.clock=null},mounted:function(){var e=this;e.socket.on("go",function(t){console.log("roomReady",t,t.testItems.length),e.room=t.room,t.testItems.length>0&&(e.testItems=t.testItems,e.timeReset=1e3*t.timeReset),e.ready.includes(t.player)||(e.ready.push(t.player),console.log(t.player)),e.readyCheck()}),e.socket.on("answer",function(t){t.btnID===e.btnIDMarker?console.log("duplicate answer"):(e.btnIDMarker=t.btnID,e.disable(t.name,t.btnID,t.player,t.state,t.answer))})}},a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"TransEng"},[s("audio",{attrs:{id:"audio"}}),e._v(" "),s("div",{staticClass:"mt-2 bg-grape p-2"},[s("b-row",{attrs:{"align-h":"end"}},[s("b-col",{attrs:{cols:"6",align:"center"}},[s("h2",{staticClass:"text-cream"},[e._v(" Match ")])]),e._v(" "),s("b-col",{attrs:{cols:"3",align:"right"}},[s("button",{staticClass:"buttonDiv bg-warn text-cream mt-2 ",on:{click:function(t){return e.leave()}}},[s("span",{staticClass:"d-none d-md-inline"},[e._v("Exit")]),s("b-icon-backspace-reverse-fill",{staticClass:"text-cream mx-2",staticStyle:{float:"right"},attrs:{"font-scale":"1.5"}})],1)])],1)],1),e._v(" "),e.showProgress?s("div",{staticClass:"bg-second"},[s("div",{staticClass:"bg-third"},[s("b-progress",{staticStyle:{height:"30px"},attrs:{max:1,"show-value":""}},[s("b-progress-bar",{attrs:{value:e.progressValues.p1,variant:"p1"}}),e._v(" "),s("b-progress-bar",{attrs:{value:e.progressValues.warn,variant:"warn-light"}}),e._v(" "),s("b-progress-bar",{attrs:{value:e.progressValues.p2,variant:"p2"}})],1)],1),e._v(" "),s("div",{staticClass:"bg-third p-3 ",staticStyle:{height:"100px"}},[s("b-row",{attrs:{"no-gutters":""}},[s("b-col",{staticClass:"mr-3",attrs:{align:"right"}},[s("b-avatar",{attrs:{src:e.s3+e.p1.toString()+".jpg",size:"65px",badge:e.nameCut(e.p1name),"badge-offset":"-0.6em","badge-variant":"p1"}})],1),e._v(" "),s("b-col",{attrs:{align:"left"}},[s("b-badge",{staticClass:"bg-smoke text-prime badge-lg mb-2",staticStyle:{"font-size":"20px",width:"40px"}},[e._v(e._s(e.p1score))]),e._v(" "),s("br"),e._v(" "),e.ready.includes("p1")?s("b-avatar",{attrs:{icon:"person-check",variant:"safe"}}):e._e()],1),e._v(" "),s("b-col",{staticClass:"mr-3",attrs:{align:"right"}},[s("b-avatar",{attrs:{src:e.s3+e.p2.toString()+".jpg",size:"65px",badge:e.nameCut(e.p2name),"badge-offset":"-0.6em","badge-variant":"p2"}})],1),e._v(" "),s("b-col",{attrs:{align:"left"}},[s("b-badge",{staticClass:"bg-smoke text-p2 badge-lg mb-2",staticStyle:{"font-size":"20px",width:"40px"}},[e._v(e._s(e.p2score))]),e._v(" "),s("br"),e._v(" "),e.ready.includes("p2")?s("b-avatar",{attrs:{icon:"person-check",variant:"safe"}}):e._e()],1)],1)],1),e._v(" "),s("div",{staticStyle:{height:"25px"}},[e.time?s("b-progress",{staticStyle:{height:"25px"},attrs:{value:e.time,max:e.timeReset,animated:"",variant:"warn"}}):e._e()],1)]):e._e(),e._v(" "),s("ToolbarMatch",{attrs:{toolbarShow:e.showTest,p1:e.p1,p2:e.p2,p1name:e.p1name,p2name:e.p2name,socket:e.socket,player:e.player,waiting:e.waiting,showAnswers:e.showAnswers,testType:e.testType},on:{waitUpdate:function(t){e.waiting=1}}}),e._v(" "),e.showTest?s("div",e._l(e.testItems,function(t,n){return s("div",{key:n},[e.testItems.indexOf(t)===e.filter?s("div",{staticClass:"bg-third p-3",class:{active:"active1"},attrs:{align:"center"},on:{mouseover:function(t){e.hover=!0},mouseleave:function(t){e.hover=!1}}},[s("h3",["sdEx"!==e.settings.sound||1==e.hover?s("span",[e._v(" "+e._s(t.Question)+" ")]):e._e(),e._v(" "),"sdEx"==e.settings.sound||"sdOn"==e.settings.sound?s("span",[s("b-icon-soundwave")],1):e._e()])]):e._e(),e._v(" "),e.testItems.indexOf(t)===e.filter?s("div",e._l(t.Choices,function(n,a){return s("div",{key:a},[s("button",{staticClass:"answerBtn bg-prime text-cream",attrs:{name:t.Question,id:t.Question+n.Answer,block:""},on:{click:function(s){return e.recordAnswer(t.Question,t.Answer,n.Answer)}}},[e._v("\n              "+e._s(n.Answer)+"\n            ")]),e._v(" "),s("br"),e._v(" "),s("br")])}),0):e._e()])}),0):e._e(),e._v(" "),e.showAnswers?s("div",[s("div",{staticClass:"mt-2"},[s("b-table",{attrs:{striped:"",hover:"",items:e.answerData,fields:e.fields}})],1)]):e._e()],1)},staticRenderFns:[]};var r=s("VU/8")(n,a,!1,function(e){s("Z2eu")},"data-v-4c818380",null);t.default=r.exports},Z2eu:function(e,t){},"ZE+q":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={name:"TypeMatch",components:{ToolbarMatch:s("LR+Q").default},props:{testType:String,p1:Number,p1name:String,p2:Number,p2name:String,player:String,socket:Object,s3:String},data:function(){return{waiting:0,pageHead:"Typing Match",toolbarShow:!0,showToolbar:!0,showAnswers:!1,showTest:!1,showProgress:!0,timeReset:30,hover:!1,ready:[],answered:0,blocker:!1,loadNew:!1,answerData:[],filter:null,testItems:[],currentAnswerHome:null,currentAnswerAway:null,awayStyle:"bg-alert-light",feedback:null,sound:null,fields:["English","Chinese","Time"],time:null,clock:null,progressValues:{p1:0,p2:0,warn:0},p1score:0,p2score:0,btnIDMarker:null}},methods:{updateSettings:function(e){console.log("update active",e),this.feedback=e.feedback,this.timeReset=e.timeReset},nameCut:function(e){var t=e.split(" ")[0];return t.length>7?t[0]:t},setCountdown:function(){this.time=this.timeReset;var e=this;this.clock=setInterval(function(){0===e.time?e.clock&&e.recordDraw():e.time-=100},100)},start:function(){this.showAnswers=!1,this.filter=0,this.answerData=[],this.showTest=!0,this.setCountdown()},readyCheck:function(){if(console.log("length",this.ready,this.ready.length),2===this.ready.length){this.waiting=2;var e=this;setTimeout(function(){e.start(),e.waiting=0,e.ready=[]},3e3)}},submitAnswer:function(){console.log("sub action"),document.getElementById("homeInput").disabled=!0,this.socket.emit("answerSend",{room:this.p1,answer:this.currentAnswerHome,opponent:this.opponent,player:this.player,state:this.validCheck})},recordAnswer:function(e){console.log("record action"),this.loadNew=!0;var t=(this.timeReset-this.time)/1e3;clearInterval(this.clock),this.clock=null,this.time=null;var s=e.player,n={English:this.testItems[this.filter].English,Chinese:this.testItems[this.filter].Chinese,_rowVariant:s,Time:t+"s"};this.progressValues[s]+=1,this.answerData.push(n),this.nextQuestion()},recordDraw:function(){console.log("record draw"),this.loadNew=!0,clearInterval(this.clock),this.clock=null,this.time=null;var e={English:this.testItems[this.filter].English,Chinese:this.testItems[this.filter].Chinese,_rowVariant:"warn",Time:"---"};this.progressValues.warn+=1,this.answerData.push(e),this.nextQuestion()},nextQuestion:function(){document.getElementById("homeInput").disabled=!0,document.getElementById("awayInput").type="text";var e=this;setTimeout(function(){e.currentAnswerHome="",e.currentAnswerAway="",document.getElementById("homeInput").disabled=!1,document.getElementById("awayInput").type="password",e.loadNew=!1,e.answered=0,e.filterToggle()},3e3)},filterToggle:function(){this.filter+1<this.testItems.length?(this.filter+=1,this.setCountdown()):(this.filter=null,this.showTest=!1,this.blocker=null,this.checkAnswers())},checkAnswers:function(){this.p1score+=this.progressValues.p1,this.p2score+=this.progressValues.p2;var e={mode:"matchType",winnerStatus:this.p1score===this.p2score?0:this.p1score>=this.p2score&&"p1"===this.player?1:this.p2score>=this.p1score&&"p2"===this.player?1:-1};console.log(e),this.$store.dispatch("updateMatch",e),this.progressValues.p1=0,this.progressValues.p2=0,this.progressValues.warn=0,this.showAnswers=!0},playAudio:function(e){var t=document.getElementById("audio");t.src=e,t.play()},leave:function(){this.$emit("leaveMatch")},validStyle:function(e){var t=this.validCheck,s=this.validAnswer;return"fbComp"!==e||t?"fbComp"===e&&t?"bg-safe-light":"fbConst"!==e||s?"fbConst"===e&&s?"bg-safe-light":"bg-cream":"bg-alert-light":"bg-cream"}},watch:{filter:function(){var e=this.testItems[this.filter];e&&"sdOff"!==this.sound&&this.playAudio(e.sdQue)},currentAnswerHome:function(){this.socket.emit("updateType",{room:this.p1,opponent:this.opponent,current:this.currentAnswerHome,player:this.player,state:this.validStyle("fbConst")})}},computed:{validAnswer:function(){var e=null,t=this.currentAnswerHome;if(!t)return!1;e=t.length;var s=this.testItems[this.filter].English;return t===this.testItems[this.filter].English||t===this.testItems[this.filter].English+" "||(t===s.substr(0,e)||!(e>0)&&void 0)},validCheck:function(){var e=this.testItems[this.filter].English;return this.currentAnswerHome===e||this.currentAnswerHome===e+" "},opponent:function(){return"p1"===this.player?"p2":"p1"}},beforeDestroy:function(){clearInterval(this.clock),this.clock=null},mounted:function(){var e=this;e.socket.on("go",function(t){e.room=t.room,t.testItems.length>0&&(e.testItems=t.testItems,e.timeReset=1e3*t.timeReset),e.ready.includes(t.player)||e.ready.push(t.player),e.readyCheck()}),e.socket.on("updateSignal",function(t){e.player===t.opponent&&(e.currentAnswerAway=t.current,e.awayStyle=t.state)}),e.socket.on("answerComplete",function(t){if(t.state){if(e.blocker===t.answer)return console.log("blocked"),!1;e.blocker=t.answer,console.log("action 1"),e.recordAnswer(t)}else 0===e.answered?(console.log("action 2"),document.getElementById("awayInput").type="text",e.answered+=1):(console.log("action 3"),e.recordDraw())})}},a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"TypeMatch"},[s("audio",{attrs:{id:"audio"}}),e._v(" "),s("div",{staticClass:"mt-2 bg-grape p-2"},[s("b-row",{attrs:{"align-h":"end"}},[s("b-col",{attrs:{cols:"6",align:"center"}},[s("h2",{staticClass:"text-cream"},[e._v(" Match ")])]),e._v(" "),s("b-col",{attrs:{cols:"3",align:"right"}},[s("button",{staticClass:"buttonDiv bg-warn text-cream",on:{click:function(t){return e.leave()}}},[s("span",{staticClass:"d-none d-md-inline"},[e._v("Exit")]),s("b-icon-backspace-reverse-fill",{staticClass:"text-cream ml-3",staticStyle:{float:"right"},attrs:{"font-scale":"1.5"}})],1)])],1)],1),e._v(" "),e.showProgress?s("div",{staticClass:"bg-second"},[s("div",{staticClass:"bg-third"},[s("b-progress",{staticStyle:{height:"20px"},attrs:{max:1,"show-value":""}},[s("b-progress-bar",{attrs:{value:e.progressValues.p1,variant:"p1"}}),e._v(" "),s("b-progress-bar",{attrs:{value:e.progressValues.warn,variant:"warn-light"}}),e._v(" "),s("b-progress-bar",{attrs:{value:e.progressValues.p2,variant:"p2"}})],1)],1),e._v(" "),s("div",{staticClass:"bg-third p-3 ",staticStyle:{height:"100px"}},[s("b-row",{attrs:{"no-gutters":""}},[s("b-col",{staticClass:"mr-3",attrs:{align:"right"}},[s("b-avatar",{attrs:{src:e.s3+e.p1.toString()+".jpg",size:"65px",badge:e.nameCut(e.p1name),"badge-offset":"-0.6em","badge-variant":"p1"}})],1),e._v(" "),s("b-col",{attrs:{align:"left"}},[s("b-badge",{staticClass:"bg-smoke text-prime badge-lg mb-2",staticStyle:{"font-size":"20px",width:"40px"}},[e._v(e._s(e.p1score))]),e._v(" "),s("br"),e._v(" "),e.ready.includes("p1")?s("b-avatar",{attrs:{icon:"person-check",variant:"safe"}}):e._e()],1),e._v(" "),s("b-col",{staticClass:"mr-3",attrs:{align:"right"}},[s("b-avatar",{attrs:{src:e.s3+e.p2.toString()+".jpg",size:"65px",badge:e.nameCut(e.p2name),"badge-offset":"-0.6em","badge-variant":"p2"}})],1),e._v(" "),s("b-col",{attrs:{align:"left"}},[s("b-badge",{staticClass:"bg-smoke text-p2 badge-lg mb-2",staticStyle:{"font-size":"20px",width:"40px"}},[e._v(e._s(e.p2score))]),e._v(" "),s("br"),e._v(" "),e.ready.includes("p2")?s("b-avatar",{attrs:{icon:"person-check",variant:"safe"}}):e._e()],1)],1)],1),e._v(" "),s("div",{staticStyle:{height:"25px"}},[e.time?s("b-progress",{attrs:{value:e.time,max:e.timeReset,variant:"warn"}}):e._e()],1)]):e._e(),e._v(" "),s("ToolbarMatch",{attrs:{toolbarShow:e.showTest,p1:e.p1,p2:e.p2,p1name:e.p1name,p2name:e.p2name,socket:e.socket,player:e.player,waiting:e.waiting,showAnswers:e.showAnswers,testType:e.testType},on:{waitUpdate:function(t){e.waiting=1},settings:function(t){return e.updateSettings(t)}}}),e._v(" "),e.showTest?s("div",{staticClass:"bg-grey"},e._l(e.testItems,function(t,n){return s("div",{key:n},[e.testItems.indexOf(t)===e.filter?s("div",[s("br"),e._v(" "),s("b-row",{staticClass:"px-5"},[s("button",{staticClass:"questionDiv bg-warn",on:{click:function(s){return e.playAudio(t.sdQue)}}},[s("h3",[s("div",[s("span",{domProps:{innerHTML:e._s(t.Spelling)}})]),e._v(" "),"sdOnly"==e.sound||"sdOn"==e.sound?s("span",[s("b-icon-soundwave")],1):e._e()])])]),e._v(" "),s("b-row",{staticClass:"px-5 mt-3"},[s("button",{staticClass:"answerBtn bg-third",attrs:{align:"center"},on:{click:function(s){return e.playAudio(t.sdAns)}}},[s("h3",[s("span",{domProps:{innerHTML:e._s(t.Chinese)}})])])]),e._v(" "),s("b-row",{staticClass:"mt-4",attrs:{"align-h":"center"}},[s("b-col",{attrs:{cols:"10"}},[s("b-form-group",[s("div",[s("b-form-input",{class:e.awayStyle,staticStyle:{"font-size":"30px",width:"100%","text-align":"center"},attrs:{align:"center",type:"password",disabled:"",id:"awayInput"},model:{value:e.currentAnswerAway,callback:function(t){e.currentAnswerAway=t},expression:"currentAnswerAway"}})],1)])],1)],1),e._v(" "),s("b-row",{staticClass:"mt-4",attrs:{"align-h":"center"}},[s("b-col",{attrs:{cols:"10"}},[s("b-form-group",[s("div",[s("b-form-input",{class:e.validStyle(e.feedback),staticStyle:{"font-size":"30px",width:"100%","text-align":"center"},attrs:{align:"center",onblur:"this.focus()",autofocus:"",autocapitalize:"none",autocomplete:"off",id:"homeInput"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitAnswer()}},model:{value:e.currentAnswerHome,callback:function(t){e.currentAnswerHome=t},expression:"currentAnswerHome"}})],1)])],1)],1),e._v(" "),s("b-row",{staticStyle:{height:"800px"}},[s("b-col",[e.loadNew?s("div",{class:"text-center text-primary"},[s("b-spinner",{staticClass:"align-middle"}),e._v(" "),s("strong",[e._v("Loading...")])],1):e._e()])],1)],1):e._e()])}),0):e._e(),e._v(" "),e.showAnswers?s("div",[s("div",{staticClass:"mt-2"},[s("b-table",{attrs:{striped:"",hover:"",items:e.answerData,fields:e.fields}})],1)]):e._e()],1)},staticRenderFns:[]};var r=s("VU/8")(n,a,!1,function(e){s("EnST")},"data-v-0ddc7b79",null);t.default=r.exports},dHcL:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("mvHQ"),a=s.n(n),r=s("XdxJ"),i=s("ZE+q"),o=s("OLUw"),l=s("gyMJ"),c={name:"Match",props:{s3:String},components:{TransMatch:r.default,TypeMatch:i.default},data:function(){return{pageHead:"Match Area",friends:{},friendAdder:!1,friendDeleter:!1,friend:{username:null,userID:null},username:null,userID:null,onlineUsers:{},userList:[],challengeUsers:{},challengeList:[],challengeMarker:null,socket:null,testType:null,p1:null,p2:null,p1name:null,p2name:null,player:null,message:null,waiting:!0,msg:null,gameSelect:"TransEng",gameTypes:[{value:"TransEng",text:"En -> Ch"},{value:"TransCh",text:"Ch -> En"},{value:"TypeMatch",text:"Spelling"}],gameNames:{TransEng:"En -> Ch",TransCh:"Ch -> En",TypeMatch:"Spelling"}}},methods:{showModal:function(){this.$refs.success.show()},showAlert:function(){this.$refs.fail.show()},hideModal:function(e){"success"===e?(this.$refs.success.hide(),this.waiting=!0):(this.$refs.fail.hide(),this.msg=null,this.waiting=!0)},startSocket:function(){this.socket=Object(o.a)(),this.socket.emit("checkOnline",{userID:this.userID})},closeSocket:function(){this.socket.close()},leaveMatch:function(){console.log("leave activated"),this.$store.dispatch("testActive"),this.socket.emit("leftMatch",{userID:this.userID,p1:this.p1,p2:this.p2}),this.testType=null,this.challengeUsers={},this.p1=null,this.p1name=null,this.p2=null,this.p2name=null},challenge:function(e,t){null===t?(this.msg="Please set game type before making a challenge",this.showAlert()):(this.challengeMarker=e,this.socket.emit("challenge",{userID:this.userID,username:this.username,targetID:e,mode:t}))},declineChallenge:function(e){delete this.challengeUsers[e],this.challengeUsers=JSON.parse(a()(this.challengeUsers))},acceptChallenge:function(e,t,s){this.socket.emit("accept",{p2:this.userID,p2name:this.username,p1:e,p1name:t,mode:s})},addFriend:function(){this.waiting=!1;var e=this,t=this.friend.username,s=this.friend.userID;return Object(l.c)({friendName:t,friendID:s,userID:e.userID}).then(function(n){n.data.check&&n.data.friendID!==e.userID?(console.log("response",n.data),e.friends=JSON.parse(n.data.friends),e.$store.dispatch("addFriend",{friendData:JSON.parse(n.data.friends)}),e.msg="Friend added:"+t+" #"+s,e.closeSocket(),e.startSocket(),e.showModal()):(e.msg="Cannot add friend. Please check username and user ID",e.showAlert())}).catch(function(e){console.log("Error Registering: ",e)})},deleteFriend:function(e){this.waiting=!1;var t=this;return Object(l.d)({friendID:e,userID:t.userID}).then(function(e){e.data.check?(console.log("response",e.data),t.friends=JSON.parse(e.data.friends),t.$store.dispatch("addFriend",{friendData:JSON.parse(e.data.friends)}),t.msg="Friend Deleted",t.showModal()):(t.msg="Cannot delete friend right now",t.showAlert())}).catch(function(e){console.log("Error Registering: ",e)})}},watch:{},created:function(){if(console.log(this.s3),!this.$store.getters.isAuthenticated)return this.$router.push("login"),!1;var e=this;window.onbeforeunload=function(){e.isAuthenticated&&!1===e.$store.state.updateStatus&&e.closeSocket()}},beforeDestroy:function(){console.log("beforeDestroyMatch"),this.closeSocket()},mounted:function(){this.userID=this.$store.state.userProfile.userID,this.username=this.$store.state.userProfile.username,this.friends=this.$store.state.logsRecord.friends,this.startSocket();var e=this;e.socket.on("onlineUsers",function(t){console.log("onlineUsers0",e.onlineUsers),e.friends[t.userID]&&(console.log("onlineUsers",t),e.onlineUsers[t.userID]=t.username,e.onlineUsers=JSON.parse(a()(e.onlineUsers)))}),e.socket.on("offlineUsers",function(t){console.log("offlineUsers",t),delete e.onlineUsers[t.userID],e.onlineUsers=JSON.parse(a()(e.onlineUsers))}),e.socket.on("disconnect",function(e){console.log("disconnect")}),e.socket.on("challenge",function(t){if(console.log("challenge",t),console.log("challengeMarker",e.challengeMarker),e.challengeMarker===t.userID)return e.challengeMarker=null,console.log("challenge blocked"),!1;var s={sender:t.sender,mode:t.mode,userID:t.userID};for(var n in e.challengeUsers)if(console.log(e.challengeUsers[n],s),e.challengeUsers[n].userID===s.userID)return console.log("found"),!1;e.challengeMarker=null,e.challengeUsers[s.userID]=s,e.challengeUsers=JSON.parse(a()(e.challengeUsers))}),e.socket.on("start",function(t){console.log("start",t),e.$store.dispatch("testActive"),e.challengeMarker=null,e.testType=t.mode,e.p1=t.p1,e.p1name=t.p1name,e.p2=t.p2,e.p2name=t.p2name,e.p1===e.$store.state.userProfile.userID?e.player="p1":e.player="p2",console.log("player",e.player)}),e.socket.on("leftRoom",function(t){console.log("left",t),e.testType?(e.msg="Game Ended, "+t.sender+" has left the game",e.showAlert(),e.leaveMatch()):(e.msg="You have left the match",e.showModal())}),e.socket.on("kickOff",function(t){console.log("ko",t),e.testType&&(e.msg="Game Ended, "+t.opponent+" has left the game",e.showAlert(),e.leaveMatch())})}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"matchArea"},[e.testType&&"r"===e.testType[1]?s("TransMatch",{attrs:{testType:e.testType,p1:e.p1,p2:e.p2,p1name:e.p1name,p2name:e.p2name,player:e.player,socket:e.socket,s3:e.s3},on:{leaveMatch:function(t){return e.leaveMatch()}}}):e._e(),e._v(" "),e.testType&&"y"===e.testType[1]?s("TypeMatch",{attrs:{testType:e.testType,p1:e.p1,p2:e.p2,p1name:e.p1name,p2name:e.p2name,player:e.player,socket:e.socket,s3:e.s3},on:{leaveMatch:function(t){return e.leaveMatch()}}}):e._e(),e._v(" "),e.waiting?[null===e.testType?s("div",[e._m(0),e._v(" "),s("div",{staticClass:"bg-third text-third p-2"},[s("b-row",{attrs:{align:"left"}},[s("b-col",{attrs:{cols:"7"}},[s("div",{staticStyle:{color:"red !important"}},[s("b-form-radio-group",{attrs:{id:"btn-radios-2",options:e.gameTypes,buttons:"","button-variant":"p1",name:"radio-btn-outline"},model:{value:e.gameSelect,callback:function(t){e.gameSelect=t},expression:"gameSelect"}})],1)]),e._v(" "),s("b-col",{attrs:{align:"right"}},[s("button",{staticClass:"buttonDiv bg-warn mt-2",on:{click:function(t){e.friendAdder=!e.friendAdder}}},[e._v(" Add "),s("b-icon",{attrs:{icon:"person"}})],1),e._v(" "),s("button",{staticClass:"buttonDiv bg-alert mt-2",on:{click:function(t){e.friendDeleter=!e.friendDeleter}}},[e._v(" Del "),s("b-icon",{attrs:{icon:"x-square-fill"}})],1)])],1)],1),e._v(" "),e.friendAdder?s("div",{staticClass:"bg-prime p-2"},[s("b-row",{attrs:{no:"",gutters:""}},[s("b-col",[s("b-form",{attrs:{inline:""}},[s("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"inline-form-input-name",placeholder:"Friend name"},model:{value:e.friend.username,callback:function(t){e.$set(e.friend,"username",t)},expression:"friend.username"}}),e._v(" "),s("b-input-group",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{prepend:"#"}},[s("b-input",{attrs:{id:"inline-form-input-username",placeholder:"user ID"},model:{value:e.friend.userID,callback:function(t){e.$set(e.friend,"userID",t)},expression:"friend.userID"}})],1)],1)],1),e._v(" "),s("b-col",[s("button",{staticClass:"buttonDiv bg-third",staticStyle:{width:"100px"},on:{click:function(t){return e.addFriend()}}},[e._v("Add")])])],1)],1):e._e(),e._v(" "),s("div",{staticClass:"bg-smoke text-prime p-2"},[e._l(e.challengeUsers,function(t,n){return s("div",{key:n},[e.onlineUsers[n]?s("div",{staticClass:"d-flex align-items-center mt-2 p-2"},[s("b-avatar",{attrs:{src:e.s3+n.toString()+"/avatar.jpg",size:"50px",badge:t.sender,"badge-offset":"-0.5em","badge-variant":"p1"}}),e._v("\n                  \n                "),s("button",{staticClass:"buttonDiv bg-smoke mx-1 ",attrs:{disabled:""}},[e._v(" "+e._s(e.gameNames[t.mode]))]),e._v(" "),s("button",{staticClass:"buttonDiv bg-p2 mx-2",staticStyle:{width:"15%"},on:{click:function(s){return e.acceptChallenge(t.userID,t.sender,t.mode)}}},[s("b-icon",{attrs:{icon:"caret-right-square-fill"}})],1),e._v(" "),s("button",{staticClass:"buttonDiv bg-alert mx-1",staticStyle:{width:"15%"},on:{click:function(s){return e.declineChallenge(t.userID)}}},[e._v(" Del "),s("b-icon",{attrs:{icon:"x-square-fill"}})],1)],1):e._e()])}),e._v(" "),e._l(e.onlineUsers,function(t,n){return s("div",{key:n},[e.challengeUsers[n]?e._e():s("div",{staticClass:"d-flex align-items-center p-3 mt-2"},[s("b-avatar",{attrs:{src:e.s3+n+"/avatar.jpg",size:"50px",badge:t,"badge-offset":"-0.5em","badge-variant":"safe"}}),e._v(" "),e.gameSelect?s("button",{staticClass:"buttonDiv bg-prime mx-3",staticStyle:{width:"15%"},on:{click:function(t){return e.challenge(n,e.gameSelect)}}},[s("b-icon",{staticClass:"text-p1",attrs:{icon:"box-arrow-in-right"}})],1):e._e(),e._v(" "),e.friendDeleter?s("button",{staticClass:"buttonDiv bg-alert mx-3",staticStyle:{width:"100px"},on:{click:function(t){return e.deleteFriend(n)}}},[s("b-icon",{attrs:{icon:"x-square-fill"}})],1):e._e()],1)])}),e._v(" "),e._l(e.friends,function(t,n){return s("div",{key:n},[e.onlineUsers[n]?e._e():s("div",{staticClass:"d-flex align-items-center p-3 mt-2"},[s("b-avatar",{attrs:{src:e.s3+n+"/avatar.jpg",size:"50px",badge:t,"badge-offset":"-0.5em","badge-variant":"alert"}}),e._v(" "),e.friendDeleter?s("button",{staticClass:"buttonDiv bg-alert mx-3",staticStyle:{width:"100px"},on:{click:function(t){return e.deleteFriend(n)}}},[s("b-icon",{attrs:{icon:"x-square-fill"}})],1):e._e()],1)])})],2)]):e._e()]:[s("div",{staticClass:"mt-5",attrs:{align:"center"}},[s("h4",{staticClass:"text-prime"},[e._v(" Updating friends.... ")]),e._v(" "),s("b-icon",{attrs:{icon:"person",animation:"throb",variant:"prime","font-scale":"6"}})],1)],e._v(" "),s("b-modal",{ref:"success",attrs:{align:"center","hide-footer":"",title:"Complete","hide-header-close":"","no-close-on-esc":"","no-close-on-backdrop":""}},[s("div",{staticClass:"d-block"},[s("h3",[e._v(" "+e._s(e.msg)+" ")])]),e._v(" "),s("button",{staticClass:"buttonDiv mt-3 bg-safe text-cream",staticStyle:{width:"60%"},on:{click:function(t){return e.hideModal("success")}}},[e._v("Close")])]),e._v(" "),s("b-modal",{ref:"fail",attrs:{align:"center","hide-footer":"",title:"Problem Found","hide-header-close":"","no-close-on-esc":"","no-close-on-backdrop":""}},[s("div",{staticClass:"d-block"},[s("h3",[e._v(" "+e._s(e.msg)+" ")])]),e._v(" "),s("button",{staticClass:"buttonDiv mt-3 bg-alert text-cream",staticStyle:{width:"60%"},on:{click:function(t){return e.hideModal("fail")}}},[e._v("Close")])])],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"mt-2 p-2 bg-grape"},[t("h2",{staticClass:"text-cream",attrs:{align:"center"}},[this._v("\n            Match Zone\n          ")])])}]};var h=s("VU/8")(c,u,!1,function(e){s("zc4W")},"data-v-4ecf9d7c",null);t.default=h.exports},zc4W:function(e,t){}});
//# sourceMappingURL=1.6c1d19f58403dfeffb62.js.map