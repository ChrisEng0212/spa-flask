webpackJsonp([6,12],{"Tc+9":function(t,s){},a05V:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n=e("UYEZ"),i=e("Lr5f"),o={name:"InstQuiz",components:{ToolbarQuiz:n.default,InstAns:i.default},props:{s3:String,exit:Boolean,index:String},data:function(){return{toolbarShow:!0,hover:!1,showAnswers:!1,showTest:!1,answerData:[],filter:null,testItems:[],settings:{},startTime:null,endTime:null,qCount:0,sCount:0,fields:["English","Chinese"],titles:{"C>E":"Chinese --\x3e English","E>C":"English --\x3e Chinese"}}},computed:{dictGet:function(){return this.$store.getters.makeList},starGet:function(){return console.log("stars",this.$store.getters.starGet),this.$store.getters.starGet},testType:function(){return this.$store.state.instructor.testRecords[this.index].type},testAns:function(){return this.$store.state.instructor.testRecords[this.index].ans?this.$store.state.instructor.testRecords[this.index].ans:" "}},methods:{recordAnswer:function(t,s,e){this.qCount+=1;var n={"E>C":t,"C>E":s}[this.testType],i=void 0,o=void 0;e===s?(i=1,this.sCount+=1,o="safe"):(i=-1,o="warn");var r={Question:t,Answer:s,Choice:e,English:n,Score:i,_rowVariant:o};this.answerData.push(r),this.filter+1<this.testItems.length?this.filter+=1:(console.log("filterMax"),this.cancel())},start:function(t){console.log(t),this.sCount=0,this.qCount=0,this.startTime=new Date,this.showAnswers=!1,this.filter=0,this.answerData=[],this.showTest=!0,t&&(this.testItems=t.test,this.settings=JSON.parse(t.settings)),this.$store.dispatch("testActive",!0)},checkAnswers:function(){console.log("testEnded"),this.$store.dispatch("testActive",!1),this.$emit("quizData",{answerData:this.answerData,score:this.sCount,time:this.timeSpan(),index:this.index})},cancel:function(){console.log("cancel"),this.filter=null,this.showTest=!1,this.endTime=new Date,this.showModal(),this.checkAnswers()},addStar:function(t,s){this.$store.dispatch("newStar",{word:t,set:s})},showModal:function(){this.$refs.complete.show()},hideModal:function(t){"complete"===t?this.$refs.complete.hide():(this.$refs.fail.hide(),this.msg=null,this.waiting=!0)},timeSpan:function(){var t=(this.endTime-this.startTime)/1e3,s=0,e=0;return t>59?(s=Math.floor(t/60),e=Math.floor(t-60*s),s.toString()+" m"+e.toString()+" s"):Math.floor(t).toString()+" s"},playAudio:function(t){console.log("PLAY",t);var s=document.getElementById("audio");s.src=t,s.play()},playAnswer:function(t){var s=this.dictGet.filter(function(s){return s.English===t});(console.log("PLAY",s),this.audioMarker)&&document.getElementById(this.audioMarker).setAttribute("class","");this.audioMarker=t;var e=document.getElementById(t);e.setAttribute("class","text-warn");var n=s[0].mp3en,i=document.getElementById("audio");i.src=n,i.play(),i.onended=function(){e.setAttribute("class","")}}},watch:{filter:function(){var t=this.testItems[this.filter];t&&"sdOff"!==this.settings.sound&&this.playAudio(t.sdQue)},hover:function(){if(this.hover){console.log("hover_active");var t=this.testItems[this.filter];this.playAudio(t.sdQue)}},exit:function(){this.cancel()}},created:function(){this.$store.getters.isAuthenticated||this.$router.push("login")}},r={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"InstQuiz"},[e("audio",{attrs:{id:"audio",autoplay:""}}),t._v(" "),e("div",{class:t.getClass("second","cream","mt-2 p-2 head")},[e("h2",{attrs:{align:"center"}},[t._v(" "+t._s(t.titles[t.testType])+" ")])]),t._v(" "),e("ToolbarQuiz",{attrs:{index:t.index,toolbarShow:t.showTest,showAnswers:t.showAnswers,testType:t.testType,testAns:t.testAns},on:{newTest:function(s){return t.start(s)},cancel:function(s){return t.$emit("cancel")}}}),t._v(" "),t.showTest?e("div",[e("b-progress",{staticStyle:{height:"30px"},attrs:{value:t.filter,max:t.testItems.length,variant:"warn-light","show-progress":"",animated:""}}),t._v(" "),t.showTest?e("div",{staticClass:"bg-grey"},t._l(t.testItems,function(s,n){return e("div",{key:n},[t.testItems.indexOf(s)===t.filter?e("div",{staticClass:"bg-second questionDiv",class:{active:"active1"},attrs:{align:"center"},on:{mouseover:function(s){t.hover=!0},mouseleave:function(s){t.hover=!1}}},[e("h3",["sdEx"!==t.settings.sound||1==t.hover?e("span",[t._v(" "+t._s(s.Question)+" ")]):t._e(),t._v(" "),"sdEx"==t.settings.sound||"sdOn"==t.settings.sound?e("span",[e("b-icon-soundwave")],1):t._e()])]):t._e(),t._v(" "),t.testItems.indexOf(s)===t.filter?e("div",{staticClass:"p-3"},t._l(s.Choices,function(n,i){return e("div",{key:i},[e("button",{staticClass:"answerBtn bg-prime text-cream",attrs:{name:s.Question,id:s.Question+n.Answer,block:""},on:{click:function(e){return t.recordAnswer(s.Question,s.Answer,n.Answer)}}},[t._v("\n              "+t._s(n.Answer)+"\n            ")]),t._v(" "),e("br"),t._v(" "),e("br")])}),0):t._e()])}),0):t._e()],1):t._e(),t._v(" "),e("b-modal",{ref:"complete",attrs:{"hide-header-close":"","no-close-on-esc":"","no-close-on-backdrop":"",align:"center","hide-footer":"",title:"Test Complete"}},[e("div",{staticClass:"d-block"},[e("h3",[t._v(" "+t._s(t.sCount)+"/"+t._s(t.qCount)+" ")]),t._v(" "),e("h3",[t._v(" "+t._s(t.timeSpan())+"  ")])]),t._v(" "),e("button",{staticClass:"buttonDiv mt-3 bg-prime text-cream",staticStyle:{width:"60%"},on:{click:function(s){return t.hideModal("complete")}}},[t._v("Close")])])],1)},staticRenderFns:[]};var a=e("VU/8")(o,r,!1,function(t){e("lYgc")},"data-v-81813936",null);s.default=a.exports},"fl+4":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n=e("a05V"),i=e("Lr5f"),o=e("Hrg7"),r={name:"InstStud",components:{InstQuiz:n.default,InstAns:i.default,InstTable:o.default},props:{exit:Boolean},data:function(){return{showQuiz:!1,waiting:!1,quiz:null,studentTestDup:null,showAns:null,showVoc:null,answerData:[],listData:[]}},methods:{showAnsModal:function(t){this.$refs.answers.show()},showVocModal:function(t){this.$refs.vocabs.show()},hideModal:function(t){this.$refs[t].hide()},getCompColor:function(t){var s="buttonDiv bg-safe px-3",e="buttonDiv bg-warn px-3";return this.getScore(t)[1]<100?e:s},getRow:function(t){if(t in this.activeQuiz)return"bg-peel"},getStudent:function(){var t=this.$store.state.userProfile;this.$store.dispatch("instructorLogs",{group:t.classroom,action:"getStudent",student:t.userID}),this.$store.dispatch("instructorLogs",{group:t.classroom,action:"getTests",student:t.userID})},getScore:function(t){var s=this.studentTests[t];if(s&&s.score>0){var e=s.score,n=s.answerData.length,i=this.testRecords[t].list.length,o=e/i*100,r=i/n*100;return[Math.round(o),Math.round(r)]}return[0,0]},startQuiz:function(t){this.quiz=t,this.showQuiz=!0},showAnswers:function(t){this.answerData=this.studentTests[t].answerData,this.showAnsModal()},showVocab:function(t,s){this.listData=s,this.showVocModal()},recordQuiz:function(t){var s=this.$store.state.userProfile;this.$store.dispatch("instructorLogs",{group:s.classroom,action:"getStudent",student:s.userID}),this.showQuiz=!1,this.studentTests[t.index]=t,this.$store.dispatch("instructorLogs",{group:s.classroom,action:"setStudent",student:s.userID,studentTests:this.studentTests})}},created:function(){this.getStudent()},computed:{studentTests:function(){return this.$store.state.instructor.studentTests},activeQuiz:function(){return this.$store.state.instructor.activeQuiz},testRecords:function(){return this.$store.state.instructor.testRecords}},beforeDestroy:function(){}},a={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"InstStud"}},[t.showQuiz?t._e():e("div",{staticClass:"mt-2 bg-prime p-2 head"},[e("div",{staticClass:"ml-2"},[e("b-row",[e("b-col",[e("h3",{staticClass:"text-cream"},[t._v(" Quiz Dashboard ")])])],1)],1)]),t._v(" "),t.showQuiz?t._e():e("div",{staticClass:"bg-white table-responsive"},[e("table",{staticClass:"table table-striped"},[t._m(0),t._v(" "),e("tbody",[t._l(t.testRecords,function(s,n){return[e("tr",{key:n,class:t.getRow(n)},[e("th",{attrs:{scope:"row"}},[t._v(t._s(n))]),t._v(" "),e("td",{attrs:{scope:"row"}},[t._v(" "+t._s(s.type))]),t._v(" "),e("td",[e("button",{staticClass:"buttonDiv bg-info px-3",on:{click:function(e){return t.showVocab(n,s.list)}}},[e("b-icon-filter-left",{attrs:{variant:"cream","font-scale":"1"}})],1),t._v(" ("+t._s(s.list.length)+")\n                ")]),t._v(" "),e("td",[e("button",{class:t.getCompColor(n),on:{click:function(s){return t.showAnswers(n)}}},[e("b-icon-bookmark-check",{attrs:{variant:"cream","font-scale":"1"}})],1),t._v(" "),t.getScore(n)[1]<100&&t.getScore(n)[1]>0?e("span",[t._v(" "+t._s(t.getScore(n)[1])+"% Complete ")]):t._e()]),t._v(" "),e("td",[n in t.activeQuiz&&0===t.getScore(n)[0]?e("div",[e("button",{staticClass:"buttonDiv bg-safe px-3",on:{click:function(s){return t.startQuiz(n)}}},[e("b-icon-forward",{attrs:{variant:"cream","font-scale":"1"}})],1)]):e("div",[t._v("\n                     "+t._s(t.getScore(n)[0])+"%\n                  ")])])])]})],2)])]),t._v(" "),t.showQuiz?e("div",[e("InstQuiz",{attrs:{index:t.quiz,exit:t.exit},on:{quizData:function(s){return t.recordQuiz(s)},cancel:function(s){t.showQuiz=!1}}})],1):t._e(),t._v(" "),e("b-modal",{ref:"answers",attrs:{"hide-header-close":"","no-close-on-esc":"","no-close-on-backdrop":"",align:"center","hide-footer":"",title:"Student Answers"}},[e("div",{staticClass:"d-block"},[e("div",{staticClass:"bg-white mt-0 p-0"},[e("InstAns",{attrs:{answerData:t.answerData,mode:"CE"}})],1)]),t._v(" "),e("button",{staticClass:"buttonDiv mt-3 bg-alert text-cream",staticStyle:{width:"60%"},on:{click:function(s){return t.hideModal("answers")}}},[t._v("Close")])]),t._v(" "),e("b-modal",{ref:"vocabs",attrs:{"hide-header-close":"","no-close-on-esc":"","no-close-on-backdrop":"",align:"center","hide-footer":"",title:"Quiz Vocab"}},[e("div",{staticClass:"d-block"},[e("div",{staticClass:"bg-white mt-0 p-0"},[e("InstTable",{attrs:{selected:["",!0],list:t.listData,mode:"student"}})],1)]),t._v(" "),e("button",{staticClass:"buttonDiv mt-3 bg-alert text-cream",staticStyle:{width:"60%"},on:{click:function(s){return t.hideModal("vocabs")}}},[t._v("Close")])])],1)},staticRenderFns:[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("Quiz")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Type")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Preview")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Answers")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Grade")])])])}]};var c=e("VU/8")(r,a,!1,function(t){e("Tc+9")},"data-v-1f6157f9",null);s.default=c.exports},lYgc:function(t,s){}});
//# sourceMappingURL=6.8bbabfb454aa5922e315.js.map