webpackJsonp([9],{dZQi:function(t,s){},n22M:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n={name:"TransEngTest",components:{Toolbar:e("djO7").default},data:function(){return{pageHead:"English --\x3e Chinese",testType:"transEng",title:"English --\x3e Chinese",toolbarShow:!0,hover:!1,showAnswers:!1,showTest:!1,answerData:[],filter:null,testItems:[],settings:{},startTime:null,endTime:null,qCount:0,sCount:0,fields:["English","Chinese","Choice"]}},methods:{recordAnswer:function(t,s,e){this.qCount+=1;var n=void 0,i=void 0;e===s?(n=1,this.sCount+=1,i="safe"):(n=-1,i="warn");var o={English:t,Chinese:s,Choice:e,Score:n,_rowVariant:i};this.answerData.push(o),this.filter+1<this.testItems.length?this.filter+=1:(console.log("filterMax"),this.cancel())},start:function(t){this.sCount=0,this.qCount=0,this.startTime=new Date,this.showAnswers=!1,this.filter=0,this.answerData=[],this.showTest=!0,t&&(this.testItems=t.test,this.settings=JSON.parse(t.settings)),this.$store.dispatch("testActive",!0)},checkAnswers:function(){console.log("testEnded"),this.showAnswers=!0,this.$store.dispatch("testActive",!1),this.$store.dispatch("updateRecord",{mode:"transEng",answerData:this.answerData,settingsData:this.settings})},cancel:function(){console.log("cancel"),this.filter=null,this.showTest=!1,this.endTime=new Date,this.showModal(),this.checkAnswers()},showModal:function(){this.$refs.complete.show()},hideModal:function(t){"complete"===t?this.$refs.complete.hide():(this.$refs.fail.hide(),this.msg=null,this.waiting=!0)},timeSpan:function(){var t=(this.endTime-this.startTime)/1e3,s=0,e=0;return t>59?(s=Math.floor(t/60),e=Math.floor(t-60*s),s.toString()+" minutes "+e.toString()+" seconds"):Math.floor(t).toString()+" seconds"},playAudio:function(t){console.log("PLAY",t);var s=document.getElementById("audio");s.src=t,s.play()}},watch:{filter:function(){var t=this.testItems[this.filter];t&&"sdOff"!==this.sound&&this.playAudio(t.sdEn)},hover:function(){if(this.hover){console.log("hover_active");var t=this.testItems[this.filter];this.playAudio(t.sdEn)}}},created:function(){this.$store.getters.isAuthenticated||this.$router.push("login")}},i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"TransEng"},[e("audio",{attrs:{id:"audio",autoplay:""}}),t._v(" "),e("Toolbar",{attrs:{toolbarShow:t.showTest,showAnswers:t.showAnswers,testType:t.testType,title:t.title},on:{newTest:function(s){return t.start(s)},retry:function(s){return t.start()}}}),t._v(" "),t.showTest?e("b-row",{attrs:{"no-gutters":""}},[e("b-col",{attrs:{cols:"11"}},[e("b-progress",{staticStyle:{height:"30px"},attrs:{value:t.filter,max:t.testItems.length,variant:"warn-light","show-progress":"",animated:""}})],1),t._v(" "),e("b-col",{attrs:{cols:"1"}},[e("button",{staticClass:"buttonDiv bg-warn",staticStyle:{height:"30px",width:"100%"},on:{click:function(s){return t.cancel()}}},[e("b-icon",{staticClass:"pb-1 pr-1",attrs:{icon:"x-circle",variant:"cream","font-scale":"1.5"}})],1)])],1):t._e(),t._v(" "),t.showTest?e("div",{staticClass:"bg-grey"},t._l(t.testItems,function(s,n){return e("div",{key:n},[t.testItems.indexOf(s)===t.filter?e("div",[e("button",{staticClass:"questionDiv bg-second",class:{active:t.hover},on:{mouseover:function(s){t.hover=!0},mouseleave:function(s){t.hover=!1}}},["sdEx"!==t.settings.sound||1==t.hover?e("span",[t._v(" "+t._s(s.English)+" ")]):t._e(),t._v(" "),"lbOn"===t.settings.label&&"sdEx"!==t.settings.sound?e("span",[t._v("   ("+t._s(s.Gr)+") ")]):t._e(),t._v(" "),"sdEx"==t.settings.sound||"sdOn"==t.settings.sound?e("span",[e("b-icon-soundwave")],1):t._e()]),t._v(" "),e("div",{staticClass:"p-3"},t._l(s.Choices,function(n,i){return e("div",{key:i},[e("button",{staticClass:"answerBtn bg-smoke",on:{click:function(e){return t.recordAnswer(s.English,s.Chinese,n.Chinese)}}},["lbAn"===t.settings.label||"lbOn"===t.settings.label?e("span",[t._v(" ("+t._s(n.Gr)+")   ")]):t._e(),t._v("  "+t._s(n.Chinese)+"\n                              ")]),t._v(" "),e("br"),t._v(" "),e("br")])}),0)]):t._e()])}),0):t._e(),t._v(" "),t.showAnswers?e("div",{staticClass:"bg-smoke"},[e("b-table",{attrs:{striped:"",hover:"",items:t.answerData,fields:t.fields}})],1):t._e(),t._v(" "),e("b-modal",{ref:"complete",attrs:{"hide-header-close":"","no-close-on-esc":"","no-close-on-backdrop":"",align:"center","hide-footer":"",title:"Test Complete"}},[e("div",{staticClass:"d-block"},[e("h3",[t._v(" "+t._s(t.sCount)+"/"+t._s(t.qCount)+" ")]),t._v(" "),e("h3",[t._v(" "+t._s(t.timeSpan())+"  ")])]),t._v(" "),e("button",{staticClass:"buttonDiv mt-3 bg-prime text-cream",staticStyle:{width:"60%"},on:{click:function(s){return t.hideModal("complete")}}},[t._v("Close")])])],1)},staticRenderFns:[]};var o=e("VU/8")(n,i,!1,function(t){e("dZQi")},"data-v-0c212bbf",null);s.default=o.exports}});
//# sourceMappingURL=9.4c1680c166243a6f9d5b.js.map