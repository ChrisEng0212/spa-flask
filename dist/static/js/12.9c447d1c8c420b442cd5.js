webpackJsonp([12],{Goic:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Dd8w"),a=s.n(i),o=s("Hrg7"),l=s("Lr5f"),n={name:"InstTests",components:{InstTable:o.default,InstAns:l.default},data:function(){return{testDetails:{title:null,type:"ECN",list:[],status:0},msg:null,holder:[null,null],results:null,answers:null,answerData:[],testRecords:{},showDetails:!1,selected:["",!0],testTypes:[{value:"ECN",label:"Eng --\x3e Ch (Normal)"}],fields:[{key:"studentID",label:"ID",sortable:!0},{key:"user",label:"Name",sortable:!0},{key:"quizData",label:"Grade",sortable:!0},{key:"time",label:"Time",sortable:!0},{key:"buttons",label:"Action"}]}},methods:{showModal:function(t){this.msg=t,this.$refs.success.show()},deleteModal:function(t,e){console.log("deleteModal",t,e),this.holder=[t,e],this.$refs.delete.show()},showAlert:function(t){this.msg=t,this.$refs.fail.show()},hideModal:function(t){this.$refs[t].hide()},deleteMode:function(){this.$refs.delete.hide(),this.holder[0]?this.deleteAnswers():this.deleteQuiz()},deleteQuiz:function(){console.log(this.holder,this.activeQuiz);var t=this.holder[1];this.$refs.delete.hide(),console.log(this.testRecords);var e=this.testRecords;this.showDetails=!1,this.results=!1,this.activeQuiz===t&&(this.activeQuiz="",this.updateActive()),e[t]&&(delete e[t],this.testRecords=a()({},this.testRecords),this.$store.dispatch("instructorLogs",{group:this.$store.state.classLoad,action:"setTests",testData:this.testRecords}))},deleteAnswers:function(){var t=this.holder[0],e=this.holder[1];console.log("delete",t,e),this.studentTests=a()({},this.$store.state.studentResults[t]),this.studentTests[e]={answerData:[],score:0,time:0},this.$store.dispatch("instructorLogs",{group:this.$store.state.classLoad,action:"setStudent",student:t,studentTests:this.studentTests})},showAnswers:function(t,e,s){console.log("show",t,e,s),this.answers===t?(this.answerData=null,this.answers=null):(this.answerData=s,this.answers=t),console.log(this.answers)},showResults:function(t){this.results===t?this.results=null:this.results=t},getScore:function(t){return console.log(t),t?[t.score,t.time]:["-","-"]},activeCheck:function(t,e){this.activeQuiz=0===e?"":t,this.updateActive()},updateActive:function(){this.$store.dispatch("instructorLogs",{group:this.$store.state.classLoad,action:"setActive",activeQuiz:this.activeQuiz})},getDetails:function(t){this.showDetails&&this.testDetails===this.testRecords[t]?(this.showDetails=!1,this.testDetails={title:null,type:"ECN",list:[],status:0}):(this.showDetails=!0,this.results=!1,this.testDetails=this.testRecords[t])},copyDetails:function(t){this.testDetails={title:this.testRecords[t].title+"copy",type:"ECN",list:this.testRecords[t].list},this.showDetails=!0,this.results=!1},newTest:function(){this.showDetails=!0,this.testDetails=a()({},{title:null,type:"ECN",list:[]})},saveTest:function(){this.showDetails=!1,this.selected[0]="",this.testRecords[this.testDetails.title]=this.testDetails,this.testRecords=a()({},this.testRecords),this.$store.dispatch("instructorLogs",{group:this.$store.state.classLoad,action:"setTests",testData:this.testRecords})},filterTable:function(t,e){return""===e[0]?!!this.testDetails.list.includes(t.English):1!==e[0].length?!!t.English.includes(e[0].trim()):e[0]===t.English[0]||void 0},playAudio:function(t,e,s,i){var a=document.getElementById(this.audioMarker[0]+this.audioMarker[1]);console.log(a,s),a&&a.setAttribute("class","text-prime");var o=void 0;o=i?"text-warn":"text-"+this.getSoundwave(),this.audioMarker=[t,e];var l=document.getElementById(t+e);l.setAttribute("class",o);var n=document.getElementById("audio");n.src=s;var r=this;n.addEventListener("error",function(t){console.log("Logging playback error: "+t),l.setAttribute("class","text-prime"),r.note="Sorry, no audio available",r.showAlert()}),n.play(),n.onended=function(){l.setAttribute("class","text-prime")}}},computed:{tableItems:function(){return this.$store.getters.makeList},activeOptions:function(){return this.$store.getters.makeActiveOptions},activeQuiz:{get:function(){return this.$store.state.activeQuiz},set:function(t){this.$store.state.activeQuiz=t}}},created:function(){var t=this.$store.getters.testRecords;this.testRecords=a()({},t)}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"instTests"}},[s("audio",{attrs:{id:"audio"}}),t._v(" "),s("div",{staticClass:"bg-white mt-0 p-0"},[s("div",{staticClass:"bg-grey p-2"},[s("b-row",[s("b-col",{attrs:{align:"right"}},[s("button",{staticClass:"buttonDiv bg-dark text-cream px-3",staticStyle:{width:"auto",height:"auto"},on:{click:function(e){return t.newTest()}}},[t._v("\n                New Test\n          ")])])],1)],1),t._v(" "),s("table",{staticClass:"table table-striped"},[t._m(0),t._v(" "),s("tbody",[t._l(t.testRecords,function(e,i){return[s("tr",{key:i},[s("th",{attrs:{scope:"row"}},[t._v(t._s(i))]),t._v(" "),s("td",[t._v(t._s(e.type))]),t._v(" "),s("td",[t._v(t._s(e.list.length))]),t._v(" "),s("td",[s("button",{staticClass:"buttonDiv bg-info px-3",staticStyle:{width:"60px"},on:{click:function(e){return t.showResults(i)}}},[s("b-icon-filter-left",{attrs:{variant:"cream","font-scale":"1"}})],1)]),t._v(" "),s("td",[s("button",{staticClass:"buttonDiv bg-safe px-3 mr-3",staticStyle:{width:"auto",height:"auto"},on:{click:function(e){return t.getDetails(i)}}},[s("b-icon-folder-plus",{attrs:{variant:"cream","font-scale":"1"}})],1)]),t._v(" "),s("td",[t.activeQuiz===i?s("button",{staticClass:"buttonDiv bg-warning px-3",staticStyle:{width:"auto",height:"auto"},on:{click:function(e){return t.activeCheck(i,0)}}},[s("b-icon",{attrs:{icon:"check"}})],1):s("button",{staticClass:"buttonDiv bg-grey px-3",staticStyle:{width:"auto",height:"auto"},on:{click:function(e){return t.activeCheck(i,1)}}},[s("b-icon",{attrs:{icon:"check"}})],1)]),t._v(" "),s("td",[s("button",{staticClass:"buttonDiv bg-warn px-3 mr-3 ",staticStyle:{width:"auto",height:"auto"},on:{click:function(e){return t.copyDetails(i)}}},[s("b-icon-collection",{attrs:{variant:"cream","font-scale":"1"}})],1)]),t._v(" "),s("td",[s("button",{staticClass:"buttonDiv bg-alert px-3 mr-3",staticStyle:{width:"60px"},on:{click:function(e){return t.deleteModal(null,i)}}},[s("b-icon",{attrs:{variant:"cream","font-scale":"1",icon:"trash-fill"}})],1)])]),t._v(" "),t.results===i?s("tr",{key:i+"1"},[s("td",{attrs:{colspan:"8"}},[s("b-table",{attrs:{striped:"",hover:"",items:t.$store.state.studentResults,fields:t.fields,"show-empty":"",fixed:"","head-variant":"dark"},scopedSlots:t._u([{key:"cell(quizData)",fn:function(e){return[t._v("\n                            "+t._s(t.getScore(e.item.quizData[i])[0],i)+"\n                        ")]}},{key:"cell(time)",fn:function(e){return[t._v("\n                            "+t._s(t.getScore(e.item.quizData[i])[1],i)+"\n                        ")]}},{key:"cell(buttons)",fn:function(e){return[e.item.quizData[i]?s("button",{staticClass:"buttonDiv bg-info px-3",on:{click:function(s){return t.showAnswers(t.idx,i,e.item.quizData[i].answerData)}}},[s("b-icon-filter-left",{attrs:{variant:"cream","font-scale":"1"}})],1):t._e(),t._v(" "),e.item.quizData[i]?s("button",{staticClass:"buttonDiv bg-alert px-3",on:{click:function(e){return t.deleteModal(t.idx,i)}}},[s("b-icon",{attrs:{variant:"cream","font-scale":"1",icon:"trash-fill"}})],1):t._e()]}}],null,!0)})],1)]):t._e(),t._v(" "),t.answers===t.idx?s("tr",{key:i+"2"},[s("td",{attrs:{colspan:"5"}},[s("div",{staticClass:"bg-white mt-0 p-0"},[s("InstAns",{attrs:{answerData:t.answerData,mode:"CE"}})],1)])]):t._e()]})],2)])]),t._v(" "),t.showDetails?s("div",[s("div",{staticClass:"mt-2 bg-darkgrey p-2"},[s("b-row",[s("b-col",[s("h3",{staticClass:"text-cream"},[t._v(" Test Details: "+t._s(t.testDetails.title)+" ")]),t._v(" "),t.testRecords[t.testDetails.title]?t._e():s("b-input-group",{attrs:{label:"Test Title:","label-for":"exampleInput1"}},[s("b-input-group-prepend",{attrs:{inline:"","is-text":""}},[s("b-icon",{attrs:{icon:"filter-left"}})],1),t._v(" "),s("b-form-input",{attrs:{id:"exampleInput1",required:"",placeholder:"Enter Test Name"},model:{value:t.testDetails.title,callback:function(e){t.$set(t.testDetails,"title",e)},expression:"testDetails.title"}})],1)],1),t._v(" "),s("b-col",{attrs:{align:"right"}},[s("button",{staticClass:"buttonDiv bg-warning text-cream px-3",staticStyle:{width:"auto",height:"auto"},on:{click:function(e){return t.saveTest()}}},[s("b-icon",{attrs:{icon:"cloud-upload","font-scale":"2"}})],1)])],1),t._v(" "),s("b-row",{staticClass:"mt-2"},[s("b-col",[s("b-input-group",{attrs:{label:"Vocab:","label-for":"exampleInput2"}},[s("b-input-group-prepend",{attrs:{inline:"","is-text":""}},[s("b-icon",{attrs:{icon:"grid3x2-gap"}})],1),t._v(" "),s("b-form-input",{attrs:{id:"exampleInput2",placeholder:"Search Vocab"},model:{value:t.selected[0],callback:function(e){t.$set(t.selected,0,e)},expression:"selected[0]"}})],1)],1)],1)],1),t._v(" "),s("div",[s("InstTable",{attrs:{selected:t.selected,list:t.testDetails.list,mode:"instructor"}})],1)]):t._e(),t._v(" "),s("b-modal",{ref:"success",attrs:{"hide-header-close":"","no-close-on-esc":"","no-close-on-backdrop":"",align:"center","hide-footer":"",title:"Success"}},[s("div",{staticClass:"d-block"},[s("h3",[t._v(" "+t._s(t.msg)+" ")])]),t._v(" "),s("button",{staticClass:"buttonDiv mt-3 bg-prime text-cream",staticStyle:{width:"60%"},on:{click:function(e){return t.hideModal("success")}}},[t._v("Close")])]),t._v(" "),s("b-modal",{ref:"delete",attrs:{"hide-header-close":"","no-close-on-esc":"","no-close-on-backdrop":"",align:"center","hide-footer":"",title:"Success"}},[s("div",{staticClass:"d-block"},[s("h3",[t._v(" You are about to delete a record. Are you sure you want to delete? ")])]),t._v(" "),s("button",{staticClass:"buttonDiv mt-3 bg-alert text-cream",staticStyle:{width:"60%"},on:{click:function(e){return t.hideModal("delete")}}},[t._v("No")]),t._v(" "),s("button",{staticClass:"buttonDiv mt-3 bg-safe text-cream",staticStyle:{width:"60%"},on:{click:function(e){return t.deleteMode()}}},[t._v("Yes")])]),t._v(" "),s("b-modal",{ref:"fail",attrs:{"hide-header-close":"","no-close-on-esc":"","no-close-on-backdrop":"",align:"center","hide-footer":"",title:"Problem Found"}},[s("div",{staticClass:"d-block"},[s("h3",[t._v(" "+t._s(t.msg)+" ")])]),t._v(" "),s("button",{staticClass:"buttonDiv mt-3 bg-alert text-cream",staticStyle:{width:"60%"},on:{click:function(e){return t.hideModal("fail")}}},[t._v("Close")])])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Test")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Type")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Vocab")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Results")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Edit")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Active")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Copy")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Delete")])])])}]};var c=s("VU/8")(n,r,!1,function(t){s("KLtJ")},"data-v-36dba796",null);e.default=c.exports},KLtJ:function(t,e){}});
//# sourceMappingURL=12.9c447d1c8c420b442cd5.js.map